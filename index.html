
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ü–æ–µ–∑–¥–æ–∫</title>
    <link rel="stylesheet" href="index.css">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Theme Color for PWA -->
    <meta name="theme-color" content="#343a40">

    <!-- Apple PWA specific meta tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ü–æ–µ–∑–¥–æ–∫">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png"> 

    <link rel="icon" href="data:;base64,iVBORw0KGgo="> <!-- Existing favicon, can be replaced by PWA icons -->

<link rel="stylesheet" href="/index.css">
</head>
<body>
    <div id="app-container">
        <h1>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ü–æ–µ–∑–¥–æ–∫</h1>

        <div id="calculator-view">
            <section id="input-section" aria-labelledby="input-heading">
                <h2 id="input-heading">–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h2>
                
                <div class="form-group">
                    <label for="denNedeliInput">–î–µ–Ω—å –Ω–µ–¥–µ–ª–∏:</label>
                    <select id="denNedeliInput" name="denNedeli" aria-describedby="denNedeliDescription" disabled>
                        <option value="–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫">–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</option>
                        <option value="–í—Ç–æ—Ä–Ω–∏–∫">–í—Ç–æ—Ä–Ω–∏–∫</option>
                        <option value="–°—Ä–µ–¥–∞">–°—Ä–µ–¥–∞</option>
                        <option value="–ß–µ—Ç–≤–µ—Ä–≥">–ß–µ—Ç–≤–µ—Ä–≥</option>
                        <option value="–ü—è—Ç–Ω–∏—Ü–∞">–ü—è—Ç–Ω–∏—Ü–∞</option>
                        <option value="–°—É–±–±–æ—Ç–∞">–°—É–±–±–æ—Ç–∞</option>
                        <option value="–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ">–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ</option>
                    </select>
                    <small id="denNedeliDescription" class="sr-only">–î–µ–Ω—å –Ω–µ–¥–µ–ª–∏ (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ –¥–∞—Ç–µ).</small>
                </div>

                <div class="form-group">
                    <label for="dataInput">–î–∞—Ç–∞:</label>
                    <input type="date" id="dataInput" name="data" aria-describedby="dataDescription">
                    <small id="dataDescription" class="sr-only">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –ø–æ–µ–∑–¥–∫–∏.</small>
                </div>

                <div class="form-group">
                    <label for="probegInput">–ü—Ä–æ–±–µ–≥ (D1), –∫–º:</label>
                    <input type="number" id="probegInput" name="probeg" step="any" value="0" aria-describedby="probegDescription">
                    <small id="probegDescription" class="sr-only">–û–±—â–∏–π –ø—Ä–æ–±–µ–≥ –∑–∞ —Å–º–µ–Ω—É –≤ –∫–∏–ª–æ–º–µ—Ç—Ä–∞—Ö.</small>
                </div>

                <div class="form-group">
                    <label for="raskhodInput">–†–∞—Å—Ö–æ–¥ (E1), –ª/100–∫–º:</label>
                    <input type="number" id="raskhodInput" name="raskhod" step="0.1" value="0" aria-describedby="raskhodDescription">
                    <small id="raskhodDescription" class="sr-only">–°—Ä–µ–¥–Ω–∏–π —Ä–∞—Å—Ö–æ–¥ —Ç–æ–ø–ª–∏–≤–∞ –ª–∏—Ç—Ä–æ–≤ –Ω–∞ 100 –∫–º.</small>
                </div>
                
                <div class="form-group">
                    <label for="cenaAI92Input">–¶–µ–Ω–∞ –ê–ò-92 (G1), —Ä.:</label>
                    <input type="number" id="cenaAI92Input" name="cenaAI92" step="0.01" value="0" aria-describedby="cenaAI92Description">
                    <small id="cenaAI92Description" class="sr-only">–¶–µ–Ω–∞ –æ–¥–Ω–æ–≥–æ –ª–∏—Ç—Ä–∞ —Ç–æ–ø–ª–∏–≤–∞ –ê–ò-92.</small>
                </div>

                <div class="form-group">
                    <label for="vremyaVPutiInput">–í—Ä–µ–º—è –≤ –ø—É—Ç–∏ (J1), —á:</label>
                    <input type="number" id="vremyaVPutiInput" name="vremyaVPuti" step="0.1" value="0" aria-describedby="vremyaVPutiDescription">
                    <small id="vremyaVPutiDescription" class="sr-only">–û–±—â–µ–µ –≤—Ä–µ–º—è –≤ –ø—É—Ç–∏ –≤ —á–∞—Å–∞—Ö.</small>
                </div>

                <div class="form-group">
                    <label for="smenaChInput">–°–º–µ–Ω–∞ (K1), —á:</label>
                    <input type="number" id="smenaChInput" name="smenaCh" step="0.1" value="0" aria-describedby="smenaChDescription">
                    <small id="smenaChDescription" class="sr-only">–û–±—â–∞—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–º–µ–Ω—ã –≤ —á–∞—Å–∞—Ö.</small>
                </div>

                <div class="form-group">
                    <label for="zakazovDo23Input">–ó–∞–∫–∞–∑–æ–≤ –¥–æ 23:00 (L1):</label>
                    <input type="number" id="zakazovDo23Input" name="zakazovDo23" step="1" value="0" aria-describedby="zakazovDo23Description">
                    <small id="zakazovDo23Description" class="sr-only">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤, –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –¥–æ 23:00.</small>
                </div>

                <div class="form-group">
                    <label for="zakazovPosle23Input">–ó–∞–∫–∞–∑–æ–≤ –ø–æ—Å–ª–µ 23:00 (M1):</label>
                    <input type="number" id="zakazovPosle23Input" name="zakazovPosle23" step="1" value="0" aria-describedby="zakazovPosle23Description">
                    <small id="zakazovPosle23Description" class="sr-only">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤, –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ 23:00.</small>
                </div>
                
                <button id="save-button">–ó–∞–ø–∏—Å–∞—Ç—å</button>
            </section>

            <section id="results-section" aria-labelledby="results-heading">
                <h2 id="results-heading">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ–∫—É—â–µ–≥–æ –¥–Ω—è</h2>
                <div class="result-item">
                    <p>–ó–∞–∫–∞–∑–æ–≤ –≤—Å–µ–≥–æ (C1): <span id="zakazovVsegoResult" aria-live="polite">_</span></p>
                </div>
                <div class="result-item">
                    <p>–°—Ä. —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –∑–∞–∫–∞–∑ (F1), –∫–º: <span id="srRasstoyanieResult" aria-live="polite">_</span></p>
                </div>
                <div class="result-item">
                    <p>–¢–æ–ø–ª–∏–≤–∞ –∑–∞—Ç—Ä–∞—á–µ–Ω–æ (H1), –ª: <span id="toplivaZatrachenoResult" aria-live="polite">_</span></p>
                </div>
                <div class="result-item">
                    <p>–ì–°–ú (I1), —Ä.: <span id="gsmResult" aria-live="polite">_</span></p>
                </div>
                <div class="result-item">
                    <p>–°—É–º–º–∞ –≤—ã–ø–ª–∞—Ç —Ä–∞—Å—á–µ—Ç–Ω–∞—è (N1), —Ä.: <span id="summaVyplatRaschetnayaResult" aria-live="polite">_</span></p>
                </div>
                <div class="result-item">
                    <p>–°—É–º–º–∞ —á–∏—Å—Ç—ã–º–∏ —Ä–∞—Å—á–µ—Ç–Ω–∞—è (-–ì–°–ú) (P1), —Ä.: <span id="summaChistymiRaschetnayaResult" aria-live="polite">_</span></p>
                </div>
                <div class="result-item">
                    <p>% –∑–∞—Ç—Ä–∞—Ç –Ω–∞ –ì–°–ú (Q1): <span id="protsentZatratResult" aria-live="polite">_</span></p>
                </div>
                <div class="result-item">
                    <p>–í —á–∞—Å —á–∏—Å—Ç—ã–º–∏ (R1), —Ä.: <span id="vChasChistymiResult" aria-live="polite">_</span></p>
                </div>
            </section>
        </div>

        <div id="summary-view" style="display: none;">
            <section id="actual-payout-section" aria-labelledby="actual-payout-heading">
                <h2 id="actual-payout-heading">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –≤—ã–ø–ª–∞—Ç—ã</h2>
                <div class="form-group">
                    <label for="actualPayoutDateInput">–î–∞—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∏—è:</label>
                    <input type="date" id="actualPayoutDateInput" name="actualPayoutDate">
                </div>
                <div class="form-group">
                    <label for="actualPayoutAmountInput">–°—É–º–º–∞ –≤—ã–ø–ª–∞—Ç—ã —Ñ–∞–∫—Ç, —Ä.:</label>
                    <input type="number" id="actualPayoutAmountInput" name="actualPayoutAmount" step="0.01" value="0">
                </div>
                <button id="recordActualPayoutButton">–ü–æ–ª—É—á–∏–ª</button>
                 <p id="total-actual-payouts-display" class="total-display">–û–±—â–∞—è —Å—É–º–º–∞ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –≤—ã–ø–ª–∞—Ç (–≤—Å–µ–≥–æ): <span id="total-actual-payouts-sum">0.00</span> —Ä.</p>
            </section>

            <section id="summary-section" aria-labelledby="summary-heading">
                <h2 id="summary-heading">–°–≤–æ–¥–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –ø–æ–µ–∑–¥–∫–∞–º</h2>
                
                <div id="net-balance-container" class="summary-totals-container net-balance-highlight">
                    <p>–ë–∞–ª–∞–Ω—Å (–†–∞—Å—á–µ—Ç–Ω—ã–π –¥–æ—Ö–æ–¥ - –§–∞–∫—Ç. –≤—ã–ø–ª–∞—Ç—ã –≤ –ø–µ—Ä–∏–æ–¥–µ): <span id="net-balance-amount" style="font-weight: bold;">0.00</span> —Ä.</p>
                </div>

                <div class="date-filter-container">
                    <h3>–§–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–∞–º:</h3>
                    <div class="form-group">
                        <label for="dateFilterFrom">–û—Ç:</label>
                        <input type="date" id="dateFilterFrom">
                    </div>
                    <div class="form-group">
                        <label for="dateFilterTo">–î–æ:</label>
                        <input type="date" id="dateFilterTo">
                    </div>
                    <button id="applyDateFilterButton">–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä</button>
                    <button id="resetDateFilterButton">–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä</button>
                </div>

                <div id="summary-totals" class="summary-totals-container">
                    <p>–í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤ (–≤ –ø–µ—Ä–∏–æ–¥–µ): <span id="total-orders">0</span></p>
                    <p>–û–±—â–∞—è —Å—É–º–º–∞ –≤—ã–ø–ª–∞—Ç (—Ä–∞—Å—á. –≤ –ø–µ—Ä–∏–æ–¥–µ): <span id="total-payout">0.00</span> —Ä.</p>
                </div>
                <div class="table-container">
                    <table id="summary-table" aria-describedby="summary-totals">
                        <caption>–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø–æ–µ–∑–¥–∫–∏</caption>
                        <thead>
                            <tr>
                                <th scope="col">–î–µ–Ω—å –Ω–µ–¥–µ–ª–∏</th>
                                <th scope="col">–î–∞—Ç–∞</th>
                                <th scope="col">–ö–æ–ª-–≤–æ –∑–∞–∫–∞–∑–æ–≤</th>
                                <th scope="col">–°—É–º–º–∞ –≤—ã–ø–ª–∞—Ç (—Ä–∞—Å—á.), —Ä.</th>
                                <th scope="col">–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å—é–¥–∞ —Å–∫—Ä–∏–ø—Ç–æ–º -->
                        </tbody>
                    </table>
                </div>
                <p id="no-data-message" style="display: none; text-align: center; margin-top: 20px;">–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.</p>
            </section>
        </div>

        <div id="payouts-view" style="display: none;">
            <section id="payouts-list-section" aria-labelledby="payouts-list-heading">
                <h2 id="payouts-list-heading">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤—ã–ø–ª–∞—Ç—ã</h2>
                 <p id="payouts-filter-info" style="text-align: center; font-style: italic; margin-bottom: 10px;"></p>
                <div class="table-container">
                    <table id="payouts-table">
                        <caption>–°–ø–∏—Å–æ–∫ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –≤—ã–ø–ª–∞—Ç</caption>
                        <thead>
                            <tr>
                                <th scope="col">–î–∞—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∏—è</th>
                                <th scope="col">–°—É–º–º–∞ –≤—ã–ø–ª–∞—Ç—ã, —Ä.</th>
                                <th scope="col">–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- –î–∞–Ω–Ω—ã–µ –æ –≤—ã–ø–ª–∞—Ç–∞—Ö -->
                        </tbody>
                    </table>
                </div>
                <p id="no-payouts-message" style="display: none; text-align: center; margin-top: 20px;">–ù–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤—ã–ø–ª–∞—Ç –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥.</p>
            </section>
            <section id="edit-payout-section" style="display: none;" aria-labelledby="edit-payout-heading">
                <h3 id="edit-payout-heading">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—ã–ø–ª–∞—Ç—É</h3>
                <input type="hidden" id="editingPayoutId">
                <div class="form-group">
                    <label for="editingPayoutDateInput">–î–∞—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∏—è:</label>
                    <input type="date" id="editingPayoutDateInput">
                </div>
                <div class="form-group">
                    <label for="editingPayoutAmountInput">–°—É–º–º–∞ –≤—ã–ø–ª–∞—Ç—ã, —Ä.:</label>
                    <input type="number" id="editingPayoutAmountInput" step="0.01">
                </div>
                <button id="savePayoutEditButton">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—ã–ø–ª–∞—Ç—ã</button>
                <button id="cancelPayoutEditButton">–û—Ç–º–µ–Ω–∞</button>
            </section>
        </div>

        <nav id="navigation-bar">
            <button id="nav-calculator-button" class="nav-button active" aria-label="–ü–µ—Ä–µ–π—Ç–∏ –∫ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—É">
                <span class="nav-icon">üöö</span> –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
            </button>
            <button id="nav-summary-button" class="nav-button" aria-label="–ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–≤–æ–¥–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏">
                <span class="nav-icon">üìä</span> –°–≤–æ–¥–∫–∞
            </button>
            <button id="nav-payouts-button" class="nav-button" aria-label="–ü–µ—Ä–µ–π—Ç–∏ –∫ –≤—ã–ø–ª–∞—Ç–∞–º">
                <span class="nav-icon">üí∞</span> –í—ã–ø–ª–∞—Ç—ã
            </button>
        </nav>

    </div>
    <script type="module" src="index.tsx"></script>
    <script>
        if ('serviceWorker' in navigator) {
          window.addEventListener('load', () => {
            navigator.serviceWorker.register('./sw.js')
              .then(registration => {
                console.log('ServiceWorker registration successful with scope: ', registration.scope);
              })
              .catch(error => {
                console.log('ServiceWorker registration failed: ', error);
              });
          });
        }
    </script>
<script type="module" src="/index.tsx"></script>
</body>
</html>